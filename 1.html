<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lyžování</title>
</head>
<style>
    body {
        margin: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        background-color: #e6e3e3;
        overflow: hidden;
    }

    .snehova-vlocka {
        position: fixed;
        top: -10px;
        left: 50%;
        width: 10px;
        height: 10px;
        background-color: white;
        border-radius: 50%;
        box-shadow: 0 0 10px rgba(255, 255, 255, 0.8);
        animation: padani 8s linear infinite;
    }

    /* Animace pohybu sněhových vloček */
    @keyframes padani {
        0% {
            transform: translateX(0) translateY(0) scale(0.8);
            opacity: 1;
        }
        100% {
            transform: translateX(calc(100vw - 50%)) translateY(100vh) scale(1);
            opacity: 0;
        }
    }
    header {
        width: 100%;
        background: #002f59; /* Gradientní pozadí */
        padding: 20px 0;
        text-align: center;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        position: relative;
        border-bottom: 5px solid #ffffff33; /* Jemné ohraničení */
    }

    header h1 {
        margin: 0;
        font-size: 32px;
        color: white;
        font-family: 'Arial Black', sans-serif;
        letter-spacing: 2px;
        text-shadow: 3px 3px 5px rgba(0, 0, 0, 0.4); /* Textový stín */
        animation: textGlow 2s ease-in-out infinite alternate; /* Animace textu */
    }

    header .tlacitko {
        margin-top: 10px;
        height: 40px;
        width: 100px;
        background-color: #000000;
        color: white;
        font-family: Arial, sans-serif;
        font-size: 20px;
        border: none;
        cursor: pointer;
        border-radius: 5px;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
    }

    header .tlacitko:hover {
        transform: translateY(-5px); /* Tlačítko se trochu nadzvedne */
        background: #214888;
    }

    main {
        flex: 1;
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        position: relative;
    }

    #skore {
        position: absolute;
        top: 10px;
        left: 10px;
        font-size: 20px;
        color: #ffffff;
    }

    #lyzar {
        position: absolute; /* Umožňuje volný pohyb */
        width: 98px;
        height: 152px;
    }
    #lyzar img {
        width: 100%;
        height: 100%;
    }

    .strom {
        position: absolute;
        width: 320px;
        height: 320px;
        background-size: cover;
        background-image: url('strom.png'); /* Odkaz na obrázek stromu */
    }

    #muteButton {
        position: absolute;
        right: 5px;
        background: none;
        border: none;
        cursor: pointer;
        margin-top: -3px;
    }

    #muteIcon {
        width: 100px;
        height: 100px;
    }

</style>

<header>
    <h1>Lyžování - vyhni se stromům</h1>
    <button class="tlacitko" id="startButton">Start</button>
</header>
<body>
<div id="snehovy-kontejner"></div>

<div id="skore">Skóre: 0</div>
<div id="lyzar"> <img src="lyzar.png" alt="lyzar"></div>

<audio id="kolizeZvuk" src="kolize.mp3"></audio>
<audio id="hudba" src="hudba.mp3" loop></audio>

<button id="muteButton">
    <img src="reprON.png" alt="Zvuk zapnut" id="muteIcon">
</button>

<script>
    const lyzar = document.getElementById('lyzar');
    const vypisSkore = document.getElementById('skore');
    const startButton = document.getElementById('startButton');
    const hudba = document.getElementById('hudba');
    const kolizeZvuk = document.getElementById('kolizeZvuk');
    const body = document.body;
    const muteButton = document.getElementById('muteButton');
    const muteIcon = document.getElementById('muteIcon');


    kolizeZvuk.volume = 0.2;
    let rychlost = 7;
    let skore = 0;
    let gameRunning = false;
    let novyStrom;
    let zvukZapnut = true;

    let lyzarPosition = { x: window.innerWidth / 2 - 51, y: 150 };
    lyzar.style.left = `${lyzarPosition.x}px`;
    lyzar.style.top = `${lyzarPosition.y}px`;

    // Pohyb lyžaře podle myši
    function enableMouseControl() {
        window.addEventListener('mousemove', (e) => {
            if (!gameRunning) return;
            lyzarPosition.x = e.clientX - 20; // Lyžař je vycentrovaný kolem myši
            lyzar.style.left = `${lyzarPosition.x}px`;
        });
    }

    startButton.addEventListener('click', () => {
        hudba.play(); //
    });

    muteButton.addEventListener('click', () => {
        zvukZapnut = !zvukZapnut;  // Přepnutí stavu zvuku (true/false)

        if (zvukZapnut) {
            // Zapnout zvuk – obnovit původní hlasitosti
            hudba.volume = 0;
            kolizeZvuk.volume = 0;
            muteIcon.src = "reprOFF.png";  // Změna obrázku na vypnutý zvuk
        } else {
            // Vypnout zvuk – nastavit hlasitost na 0
            hudba.volume = 1;
            kolizeZvuk.volume = 0.2;
            muteIcon.src = "reprON.png";  // Změna obrázku na zapnutý zvukbackgroundMusic.volume = 0;
        }
    });

    // Funkce pro detekci kolize mezi lyžařem a stromem
    function kolize(lyzar, strom) {
        const lyzarRect = lyzar.getBoundingClientRect();
        const stromRect = strom.getBoundingClientRect();

        return (
            lyzarRect.left < stromRect.left + stromRect.width &&
            lyzarRect.left + lyzarRect.width > stromRect.left &&
            lyzarRect.top < stromRect.top + stromRect.height &&
            lyzarRect.height + lyzarRect.top > stromRect.top
        );
    }

    function generatorStromu() {
        const strom = document.createElement('div');
        strom.classList.add('strom');
        strom.style.left = `${Math.random() * (window.innerWidth - 100)}px`;
        strom.style.top = `${window.innerHeight}px`;
        body.appendChild(strom);

        // Posun stromu
        const posunStromu = setInterval(() => {
            const currentTop = parseFloat(strom.style.top);
            if (currentTop <= -300) {
                clearInterval(posunStromu);
                strom.remove();
                skore += 1; // Přidáme bod za přežitý strom
                vypisSkore.textContent = `Skóre: ${skore}`;
            } else {
                strom.style.top = `${currentTop - rychlost}px`; // Rychlost pohybu
                if (kolize(lyzar, strom)) {
                    clearInterval(posunStromu);
                    gameOver();
                }
            }
        }, 30);
    }

    function vytvorVlocku() {
        const container = document.getElementById('snehovy-kontejner') || document.body;
        const vlocka = document.createElement('div');
        vlocka.classList.add('snehova-vlocka');

        const velikost = Math.random() * 8 + 5; // Velikost vločky
        vlocka.style.left = `${Math.random() * window.innerWidth}px`;
        vlocka.style.width = `${velikost}px`;
        vlocka.style.height = `${velikost}px`;
        vlocka.style.animationDuration = `${Math.random() * 5 + (velikost < 8 ? 8 : 3)}s`; // Menší vločky padají pomaleji
        vlocka.style.animationDelay = `${Math.random() * 3}s`;

        // Paralelní pohyb: různé směry, i diagonálně
        const smer = Math.random() > 0.5 ? 1 : -1;
        vlocka.style.transform = `translateX(${smer * (Math.random() * 10)}px)`;

        container.appendChild(vlocka);

        setTimeout(() => {
            vlocka.remove();
        }, 10000);
    }

    // Vločky se nyní generují častěji a s různou rychlostí
    setInterval(vytvorVlocku, 100);

    function gameOver() {
        hudba.pause(); // Zastavíme hudbu
        kolizeZvuk.play();
        gameRunning = false;
        alert(`Srážka! Hra skončila, Skóre: ${skore}`);
        location.reload(); // Restart hry
    }

    startButton.addEventListener('click', () => {
        startButton.style.display = 'none';
        skore = 0;
        vypisSkore.textContent = `Skóre: ${skore}`;
        gameRunning = true;
        enableMouseControl(); // Aktivuje pohyb lyžaře podle myši

        // Generování stromů každých 1500 ms
        novyStrom = setInterval(() => {
            if (gameRunning) {
                generatorStromu();
            }
        }, 1500);

        // Zrychlování hry každé 2 sekundy
        setInterval(() => {
            if (gameRunning) {
                rychlost += 1; // Zvyšujeme rychlost
            }
        }, 2500);
    });

</script>

</body>

</html>


<!--pauza-->
<!--sbírání bodů (jako stromy ale přičítaj se ke skore)-->
<!--časovej limit? jestli zbyde časovej limit-->