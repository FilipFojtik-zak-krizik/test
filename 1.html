<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Lyžování</title>
</head>
<style>
    body {
        margin: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        background-color: antiquewhite;
        overflow: hidden;
    }

    header {
        width: 100%;
        background-color: #f4f4f4;
        padding: 10px 0;
        text-align: center;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }

    header h1 {
        margin: 0;
        font-size: 24px;
        color: black;
    }

    header .tlacitko {
        margin-top: 10px;
        height: 40px;
        width: 100px;
        background-color: green;
        color: white;
        font-family: Arial, sans-serif;
        font-size: 20px;
        border: none;
        cursor: pointer;
        border-radius: 5px;
    }

    main {
        flex: 1;
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        position: relative;
    }

    #skore {
        position: absolute;
        top: 10px;
        left: 10px;
        font-size: 20px;
        color: black;
    }

    #lyzar {
        position: absolute; /* Umožňuje volný pohyb */
        width: 98px;
        height: 152px;
    }

    .strom {
        position: absolute;
        width: 320px;
        height: 320px;
        background-size: cover;
        background-image: url('strom.png'); /* Odkaz na obrázek stromu */
        border-radius: 50%;
    }

</style>

<header>
    <h1>Lyžování - vyhni se stromům</h1>
    <button class="tlacitko" id="startButton">Start</button>
</header>
<body>
<div id="skore">Skóre: 0</div>
<div id="lyzar"> <img src="lyzar.png" alt="lyzar"></div>

<script>
    const lyzar = document.getElementById('lyzar');
    const vypisSkore = document.getElementById('skore');
    const startButton = document.getElementById('startButton');
    const body = document.body;

    let rychlost = 7;
    let skore = 0;
    let gameRunning = false;
    let novyStrom;

    let lyzarPosition = { x: window.innerWidth / 2 - 59, y: 105 };
    lyzar.style.left = `${lyzarPosition.x}px`;
    lyzar.style.top = `${lyzarPosition.y}px`;

    // Pohyb lyžaře podle myši
    function enableMouseControl() {
        window.addEventListener('mousemove', (e) => {
            if (!gameRunning) return;
            lyzarPosition.x = e.clientX - 20; // Lyžař je vycentrovaný kolem myši
            lyzar.style.left = `${lyzarPosition.x}px`;
        });
    }

    // Funkce pro detekci kolize mezi lyžařem a stromem
    function kolize(lyzar, strom) {
        const lyzarRect = lyzar.getBoundingClientRect();
        const stromRect = strom.getBoundingClientRect();

        return (
            lyzarRect.left < stromRect.left + stromRect.width &&
            lyzarRect.left + lyzarRect.width > stromRect.left &&
            lyzarRect.top < stromRect.top + stromRect.height &&
            lyzarRect.height + lyzarRect.top > stromRect.top
        );
    }

    function generatorStromu() {
        const strom = document.createElement('div');
        strom.classList.add('strom');
        strom.style.left = `${Math.random() * (window.innerWidth - 100)}px`;
        strom.style.top = `${window.innerHeight}px`;
        body.appendChild(strom);

        // Posun stromu
        const posunStromu = setInterval(() => {
            const currentTop = parseFloat(strom.style.top);
            if (currentTop <= -300) {
                clearInterval(posunStromu);
                strom.remove();
                skore += 1; // Přidáme bod za přežitý strom
                vypisSkore.textContent = `Skóre: ${skore}`;
            } else {
                strom.style.top = `${currentTop - rychlost}px`; // Rychlost pohybu
                if (kolize(lyzar, strom)) {
                    clearInterval(posunStromu);
                    gameOver();
                }
            }
        }, 30);
    }

    function gameOver() {
        gameRunning = false;
        alert('Srážka! Hra skončila.');
        location.reload(); // Restart hry
    }

    startButton.addEventListener('click', () => {
        startButton.style.display = 'none';
        skore = 0;
        vypisSkore.textContent = `Skóre: ${skore}`;
        gameRunning = true;
        enableMouseControl(); // Aktivuje pohyb lyžaře podle myši

        // Generování stromů každých 1500 ms
        novyStrom = setInterval(() => {
            if (gameRunning) {
                generatorStromu();
            }
        }, 1500);

        // Zrychlování hry každé 2 sekundy
        setInterval(() => {
            if (gameRunning) {
                rychlost += 1; // Zvyšujeme rychlost
            }
        }, 2500);
    });
</script>

</body>

</html>


<!--pauza-->
<!--sbírání bodů (jako stromy ale přičítaj se ke skore)-->
<!--časovej limit? jestli zbyde časovej limit-->